import{j as e,r as i,a as ee}from"./react-DT8LJvCP.js";import{c as re}from"./react-dom-CgLM1BKd.js";import{L as O,H as ae}from"./react-router-dom-D0SEAELn.js";import{a as ne}from"./axios-BimPEqV4.js";import{F as W,a as A,b as Q,c as G,d as q,e as oe,f as ie,g as le,h as ce}from"./react-icons-BKXRZd-A.js";import{a as P,d as de,e as C}from"./react-router-CpBs4emU.js";import{m as f,A as M}from"./framer-motion-BfYewwjZ.js";import{s as se,P as me,A as ue,C as z,T as j,F,a as xe,b as pe,B as U,L as he,G as I,c as fe,d as ye,e as L,f as T,h as Y,i as R,E as ge,j as je,k as be,l as ve,m as H,n as Z,S as J,o as D,p as we,q as Ne,H as Se,Z as _e,r as Ce,I as ke,t as Pe,u as Ie}from"./@mui-D-hSLUob.js";import"./scheduler-CzFDRTuY.js";import"./@remix-run-6JyqD-Ks.js";import"./clsx-B-dksMZM.js";import"./@emotion-CQgfxT40.js";import"./hoist-non-react-statics-Buxaj0Kl.js";import"./react-is-8JwjhRSi.js";import"./@babel-DuB8yAtz.js";import"./stylis-YPZU7XtI.js";import"./react-transition-group-CTy5ZzDl.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();const Ae=()=>e.jsx("header",{className:"bg-primary text-white p-4",children:e.jsxs("div",{className:"container mx-auto flex justify-between items-center",children:[e.jsx(O,{to:"/",className:"text-2xl font-bold",children:"Biomedical IQ"}),e.jsxs("nav",{children:[e.jsx(O,{to:"/login",className:"mr-4",children:"Login"}),e.jsx(O,{to:"/register",className:"bg-white text-primary px-4 py-2 rounded",children:"Sign Up"})]})]})}),Ee=()=>e.jsx("footer",{className:"bg-secondary text-white p-4 mt-8",children:e.jsx("div",{className:"container mx-auto text-center",children:e.jsx("p",{children:"Â© 2024 Biomedical IQ. All rights reserved."})})}),te="https://biomedical-iq-backend.onrender.com",b=ne.create({baseURL:te,headers:{"Content-Type":"application/json"}}),Fe=()=>sessionStorage.getItem("access_token"),Le=()=>sessionStorage.getItem("refresh_token"),Te=async()=>{try{const s=Le();if(!s)throw new Error("Refresh token is missing. Redirecting to login...");const t=await fetch(`${te}/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh_token:s})}),r=await t.json();if(t.ok)return sessionStorage.setItem("access_token",r.access_token),console.log("Access token refreshed successfully"),r.access_token;throw new Error(r.error||"Token refresh failed")}catch(s){console.error("Error occurred while refreshing token:",s),sessionStorage.removeItem("access_token"),sessionStorage.removeItem("refresh_token"),window.location.href="/login"}};b.interceptors.request.use(s=>{const t=Fe();return t&&(s.headers.Authorization=`Bearer ${t}`),s},s=>Promise.reject(s));b.interceptors.response.use(s=>s,async s=>{const t=s.config;if(s.response&&s.response.status===401&&!t._retry){t._retry=!0;try{const r=await Te();if(r)return t.headers.Authorization=`Bearer ${r}`,b(t)}catch(r){return console.error("Failed to refresh token, redirecting to login..."),Promise.reject(r)}}return Promise.reject(s)});const Re=async s=>{var t;try{const r=await b.post("/login",s),{token:n,user:a}=r.data;return sessionStorage.clear(),sessionStorage.setItem("access_token",n),{token:n,user:a}}catch(r){throw console.error("Login failed:",r),((t=r.response)==null?void 0:t.data)||{error:"Login failed"}}},De=async()=>{var s;try{return(await b.get("/profile")).data}catch(t){throw console.error("Failed to fetch user profile:",t),((s=t.response)==null?void 0:s.data)||{error:"Failed to fetch user profile"}}},ze=async s=>{var t,r;try{return(await b.put("/update_profile",s)).data}catch(n){throw console.error("Failed to update user profile:",n),((t=n.response)==null?void 0:t.status)===401?new Error("Unauthorized access. Please log in again."):((r=n.response)==null?void 0:r.data)||{error:"Failed to update user profile"}}},qe=async s=>{var t;try{return(await b.post("/register",s)).data}catch(r){throw((t=r.response)==null?void 0:t.data)||{error:"Registration failed"}}},$e=async(s,t)=>{var r;try{const n=await b.post("/verify",{email:s,verification_code:t});return localStorage.setItem("token",n.data.access_token),localStorage.setItem("refreshToken",n.data.refresh_token),n.data}catch(n){throw((r=n.response)==null?void 0:r.data)||{error:"2FA verification failed"}}},Be=async()=>{try{await b.post("/logout")}catch(s){console.error("Logout error:",s)}finally{localStorage.removeItem("token"),localStorage.removeItem("refreshToken")}},Oe=async s=>{var t;try{return(await b.post("/reset_password",{identifier:s})).data}catch(r){throw((t=r.response)==null?void 0:t.data)||{error:"Password reset request failed"}}},Ue=async s=>{var t;try{return(await b.post("/confirm_reset",s)).data}catch(r){throw((t=r.response)==null?void 0:t.data)||{error:"Password reset confirmation failed"}}},X=()=>{const[s,t]=i.useState({login_info:"",password:""}),[r,n]=i.useState(!1),[a,o]=i.useState(""),l=P(),u=m=>{t({...s,[m.target.name]:m.target.value})},d=async m=>{m.preventDefault();try{const{token:h,user:y}=await Re(s);y.requires2FA?l("/2fa",{state:{message:"Please enter your 2FA code",email:s.login_info}}):l("/dashboard")}catch(h){o((h==null?void 0:h.error)||"Invalid credentials")}};i.useEffect(()=>{if(a){const m=setTimeout(()=>o(""),5e3);return()=>clearTimeout(m)}},[a]);const x="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-800 text-white",p="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400";return e.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"min-h-screen flex items-center justify-center bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsx("div",{children:e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-white",children:"Sign in to Biomedical IQ"})}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:d,children:[e.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx(W,{className:p}),e.jsx("input",{name:"login_info",type:"text",required:!0,className:`${x} pl-10`,placeholder:"Email or Username",value:s.login_info,onChange:u})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(A,{className:p}),e.jsx("input",{name:"password",type:r?"text":"password",required:!0,className:`${x} pl-10 pr-10`,placeholder:"Password",value:s.password,onChange:u}),e.jsx("button",{type:"button",className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400",onClick:()=>n(!r),children:r?e.jsx(Q,{}):e.jsx(G,{})})]})]}),e.jsx(M,{children:a&&e.jsx(f.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:e.jsx("span",{className:"block sm:inline",children:a})})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-400",children:"Remember me"})]}),e.jsx("div",{className:"text-sm",children:e.jsx("a",{href:"/reset-password",className:"font-medium text-blue-500 hover:text-blue-400",children:"Forgot your password?"})})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Sign in"})})]}),e.jsx("div",{className:"text-center mt-4",children:e.jsxs("p",{className:"text-sm text-gray-400",children:["Don't have an account?"," ",e.jsx("a",{href:"/register",className:"font-medium text-blue-500 hover:text-blue-400",children:"Sign up here"})]})})]})})},He=()=>{const[s,t]=i.useState({full_name:"",email:"",username:"",phone_number:"",organization_name:"",password:"",confirm_password:""}),[r,n]=i.useState(!1),[a,o]=i.useState(!1),[l,u]=i.useState(""),[d,x]=i.useState(""),[p,m]=i.useState(!1),h=P(),y=w=>{t({...s,[w.target.name]:w.target.value})},$=async w=>{var E,_;if(w.preventDefault(),s.password!==s.confirm_password){u("Passwords do not match");return}m(!0);try{await qe(s),x("Registration successful! Please check your email for verification."),setTimeout(()=>h("/verify"),3e3)}catch(B){u(((_=(E=B.response)==null?void 0:E.data)==null?void 0:_.error)||"An error occurred during registration")}finally{m(!1)}};i.useEffect(()=>{if(l){const w=setTimeout(()=>u(""),5e3);return()=>clearTimeout(w)}},[l]);const g="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-800 text-white",v="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400";return e.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"min-h-screen flex items-center justify-center bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsx("div",{children:e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-white",children:"Create your Biomedical IQ account"})}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:$,children:[e.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx(W,{className:v}),e.jsx("input",{name:"full_name",type:"text",required:!0,className:`${g} pl-10`,placeholder:"Full Name",value:s.full_name,onChange:y})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(q,{className:v}),e.jsx("input",{name:"email",type:"email",required:!0,className:`${g} pl-10`,placeholder:"Email address",value:s.email,onChange:y})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(W,{className:v}),e.jsx("input",{name:"username",type:"text",required:!0,className:`${g} pl-10`,placeholder:"Username",value:s.username,onChange:y})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(oe,{className:v}),e.jsx("input",{name:"phone_number",type:"tel",required:!0,className:`${g} pl-10`,placeholder:"Phone Number",value:s.phone_number,onChange:y})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(ie,{className:v}),e.jsx("input",{name:"organization_name",type:"text",required:!0,className:`${g} pl-10`,placeholder:"Organization Name",value:s.organization_name,onChange:y})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(A,{className:v}),e.jsx("input",{name:"password",type:r?"text":"password",required:!0,className:`${g} pl-10 pr-10`,placeholder:"Password",value:s.password,onChange:y}),e.jsx("button",{type:"button",className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400",onClick:()=>n(!r),children:r?e.jsx(Q,{}):e.jsx(G,{})})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(A,{className:v}),e.jsx("input",{name:"confirm_password",type:a?"text":"password",required:!0,className:`${g} pl-10 pr-10`,placeholder:"Confirm Password",value:s.confirm_password,onChange:y}),e.jsx("button",{type:"button",className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400",onClick:()=>o(!a),children:a?e.jsx(Q,{}):e.jsx(G,{})})]})]}),e.jsx(M,{children:l&&e.jsx(f.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:e.jsx("span",{className:"block sm:inline",children:l})})}),e.jsx(M,{children:d&&e.jsx(f.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative",role:"alert",children:e.jsx("span",{className:"block sm:inline",children:d})})}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Register"})})]}),e.jsx("div",{className:"text-center mt-4",children:e.jsxs("p",{className:"text-sm text-gray-400",children:["Already have an account?"," ",e.jsx("a",{href:"/login",className:"font-medium text-blue-500 hover:text-blue-400",children:"Log in here"})]})})]})})},k=({label:s,name:t,type:r,value:n,onChange:a,error:o,icon:l})=>e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:t,className:"block text-sm font-medium text-gray-700 mb-1",children:s}),e.jsxs("div",{className:"relative rounded-md shadow-sm",children:[l&&e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(l,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),e.jsx("input",{type:r,name:t,id:t,value:n,onChange:a,className:`block w-full rounded-md ${l?"pl-10":"pl-3"} pr-3 py-2 border ${o?"border-red-300 text-red-900 placeholder-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary-500 focus:border-primary-500"} shadow-sm focus:outline-none sm:text-sm`}),o&&e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx(le,{className:"h-5 w-5 text-red-500","aria-hidden":"true"})})]}),o&&e.jsx("p",{className:"mt-2 text-sm text-red-600",id:`${t}-error`,children:o})]}),Ve=()=>{const[s,t]=i.useState({email:"",verification_code:""}),[r,n]=i.useState(""),[a,o]=i.useState(""),l=P(),u=x=>{t({...s,[x.target.name]:x.target.value})},d=async x=>{var p,m;x.preventDefault();try{await $e(s.email,s.verification_code),o("Account verified successfully!"),setTimeout(()=>l("/login"),3e3)}catch(h){n(((m=(p=h.response)==null?void 0:p.data)==null?void 0:m.error)||"An error occurred")}};return e.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsx("div",{children:e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Verify Your Account"})}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:d,children:[e.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[e.jsx(k,{label:"Email",name:"email",type:"email",value:s.email,onChange:u,icon:q}),e.jsx(k,{label:"Verification Code",name:"verification_code",type:"text",value:s.verification_code,onChange:u,icon:ce})]}),r&&e.jsx(f.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:e.jsx("span",{className:"block sm:inline",children:r})}),a&&e.jsx(f.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative",role:"alert",children:e.jsx("span",{className:"block sm:inline",children:a})}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Verify Account"})})]})]})})},We=()=>{const[s,t]=i.useState(""),[r,n]=i.useState(""),[a,o]=i.useState(""),l=P(),u=async d=>{var x,p;d.preventDefault();try{await Oe(s),o("A verification code has been sent to your email."),setTimeout(()=>l("/confirm-reset"),3e3)}catch(m){n(((p=(x=m.response)==null?void 0:x.data)==null?void 0:p.error)||"An error occurred")}};return e.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsx("div",{children:e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Reset Your Password"})}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:u,children:[e.jsx("div",{className:"rounded-md shadow-sm -space-y-px",children:e.jsx(k,{label:"Email",name:"email",type:"email",value:s,onChange:d=>t(d.target.value),icon:q})}),r&&e.jsx(f.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:e.jsx("span",{className:"block sm:inline",children:r})}),a&&e.jsx(f.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative",role:"alert",children:e.jsx("span",{className:"block sm:inline",children:a})}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Send Reset Link"})})]})]})})},Qe=()=>{const[s,t]=i.useState({email:"",verification_code:"",new_password:"",confirm_password:""}),[r,n]=i.useState(""),[a,o]=i.useState(""),l=P(),u=x=>{t({...s,[x.target.name]:x.target.value})},d=async x=>{var p,m;x.preventDefault();try{await Ue(s),o("Password reset successful!"),setTimeout(()=>l("/login"),3e3)}catch(h){n(((m=(p=h.response)==null?void 0:p.data)==null?void 0:m.error)||"An error occurred")}};return e.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsx("div",{children:e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Confirm Password Reset"})}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:d,children:[e.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[e.jsx(k,{label:"Email",name:"email",type:"email",value:s.email,onChange:u,icon:q}),e.jsx(k,{label:"Verification Code",name:"verification_code",type:"text",value:s.verification_code,onChange:u}),e.jsx(k,{label:"New Password",name:"new_password",type:"password",value:s.new_password,onChange:u,icon:A}),e.jsx(k,{label:"Confirm New Password",name:"confirm_password",type:"password",value:s.confirm_password,onChange:u,icon:A})]}),r&&e.jsx(f.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:e.jsx("span",{className:"block sm:inline",children:r})}),a&&e.jsx(f.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative",role:"alert",children:e.jsx("span",{className:"block sm:inline",children:a})}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Reset Password"})})]})]})})},V=se(me)(({theme:s})=>({padding:s.spacing(3),height:"100%",display:"flex",flexDirection:"column",transition:s.transitions.create(["box-shadow"],{duration:s.transitions.duration.short}),"&:hover":{boxShadow:s.shadows[4]}})),Ge=se(ue)(({theme:s})=>({width:120,height:120,margin:"auto",marginBottom:s.spacing(2),transition:s.transitions.create(["width","height"],{duration:s.transitions.duration.short}),"&:hover":{width:130,height:130}})),Me=()=>e.jsx(z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:e.jsx(Ie,{})}),Ke=()=>{const[s,t]=i.useState(null),[r,n]=i.useState(""),[a,o]=i.useState(!1),[l,u]=i.useState({}),[d,x]=i.useState(0),[p,m]=i.useState(!0),[h,y]=i.useState({open:!1,message:"",severity:"success"}),$=P(),g=i.useCallback(async()=>{try{m(!0);const c=await De();t(c),u(c)}catch(c){console.error("Error fetching user profile:",c),c.response&&c.response.status===401?v():n((c==null?void 0:c.message)||"Failed to load user data")}finally{m(!1)}},[]);i.useEffect(()=>{g()},[g]);const v=async()=>{try{await Be()}catch(c){console.error("Logout error:",c)}finally{sessionStorage.removeItem("access_token"),sessionStorage.removeItem("refresh_token"),$("/login")}},w=()=>o(!0),E=async()=>{var c,N;try{const S=await ze(l);t(S),o(!1),y({open:!0,message:"Profile updated successfully",severity:"success"}),g()}catch(S){n(((N=(c=S==null?void 0:S.response)==null?void 0:c.data)==null?void 0:N.message)||"Failed to update profile"),y({open:!0,message:"Failed to update profile",severity:"error"})}},_=c=>{u({...l,[c.target.name]:c.target.value})},B=(c,N)=>{x(N)},K=(c,N)=>{N!=="clickaway"&&y({...h,open:!1})};return p?e.jsx(Me,{}):r?e.jsx(z,{children:e.jsx(j,{color:"error",variant:"h6",children:r})}):s?e.jsx(F,{in:!0,timeout:1e3,children:e.jsxs("div",{children:[e.jsx(xe,{position:"static",elevation:0,children:e.jsxs(pe,{children:[e.jsx(j,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Biomedical IQ Dashboard"}),e.jsxs(j,{variant:"subtitle1",sx:{mr:2},children:["Welcome, ",s.full_name]}),e.jsx(U,{color:"inherit",onClick:v,startIcon:e.jsx(he,{}),children:"Logout"})]})}),e.jsxs(z,{maxWidth:"lg",sx:{mt:4,mb:4},children:[e.jsxs(I,{container:!0,spacing:3,children:[e.jsx(fe,{in:!0,timeout:1e3,children:e.jsx(I,{item:!0,xs:12,md:4,lg:3,children:e.jsxs(V,{elevation:3,children:[e.jsx(Ge,{sx:{bgcolor:"primary.main"},children:s.full_name.charAt(0)}),e.jsxs(ye,{children:[e.jsxs(L,{children:[e.jsx(T,{children:e.jsx(Y,{})}),e.jsx(R,{primary:s.full_name,secondary:"Full Name"})]}),e.jsxs(L,{children:[e.jsx(T,{children:e.jsx(ge,{})}),e.jsx(R,{primary:s.email,secondary:"Email"})]}),s.phone_number&&e.jsxs(L,{children:[e.jsx(T,{children:e.jsx(je,{})}),e.jsx(R,{primary:s.phone_number,secondary:"Phone"})]}),s.organization_name&&e.jsxs(L,{children:[e.jsx(T,{children:e.jsx(be,{})}),e.jsx(R,{primary:s.organization_name,secondary:"Organization"})]})]})]})})}),e.jsx(I,{item:!0,xs:12,md:8,lg:9,children:e.jsxs(V,{elevation:3,children:[e.jsxs(ve,{value:d,onChange:B,"aria-label":"dashboard tabs",variant:"fullWidth",indicatorColor:"primary",textColor:"primary",children:[e.jsx(H,{label:"Profile",icon:e.jsx(Y,{})}),e.jsx(H,{label:"Activity",icon:e.jsx(Z,{})}),e.jsx(H,{label:"Settings",icon:e.jsx(J,{})})]}),e.jsx(F,{in:d===0,timeout:500,children:e.jsxs("div",{hidden:d!==0,children:[e.jsx(j,{variant:"h6",sx:{mt:2,mb:2},children:"Account Information"}),a?e.jsxs("form",{onSubmit:c=>{c.preventDefault(),E()},children:[e.jsx(D,{fullWidth:!0,margin:"normal",label:"Full Name",name:"full_name",value:l.full_name,onChange:_,variant:"outlined"}),e.jsx(D,{fullWidth:!0,margin:"normal",label:"Email",name:"email",type:"email",value:l.email,onChange:_,variant:"outlined"}),e.jsx(D,{fullWidth:!0,margin:"normal",label:"Phone Number",name:"phone_number",value:l.phone_number||"",onChange:_,variant:"outlined"}),e.jsx(D,{fullWidth:!0,margin:"normal",label:"Organization Name",name:"organization_name",value:l.organization_name||"",onChange:_,variant:"outlined"}),e.jsx(U,{type:"submit",variant:"contained",color:"primary",startIcon:e.jsx(we,{}),sx:{mt:2},children:"Save"})]}):e.jsx(U,{onClick:w,variant:"contained",color:"secondary",startIcon:e.jsx(Ne,{}),sx:{mt:2},children:"Edit Profile"})]})}),e.jsx(F,{in:d===1,timeout:500,children:e.jsxs("div",{hidden:d!==1,children:[e.jsx(j,{variant:"h6",sx:{mt:2},children:"Recent Activity"}),e.jsx(j,{children:"No recent activity to display."})]})}),e.jsx(F,{in:d===2,timeout:500,children:e.jsxs("div",{hidden:d!==2,children:[e.jsx(j,{variant:"h6",sx:{mt:2},children:"Account Settings"}),e.jsx(j,{children:"Account settings options will be available soon."})]})})]})})]}),e.jsx(j,{variant:"h5",sx:{mt:4,mb:2},children:"Quick Actions"}),e.jsx(I,{container:!0,spacing:3,children:[{icon:e.jsx(Z,{}),text:"View Activity Log"},{icon:e.jsx(J,{}),text:"Account Settings"},{icon:e.jsx(Se,{}),text:"Get Help"}].map(({icon:c,text:N},S)=>e.jsx(_e,{in:!0,style:{transitionDelay:`${S*100}ms`},children:e.jsx(I,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(V,{sx:{cursor:"pointer",textAlign:"center",py:3},children:[ee.cloneElement(c,{sx:{fontSize:48,color:"primary.main",mb:2}}),e.jsx(j,{variant:"h6",children:N})]})})},S))})]}),e.jsx(Ce,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:h.open,autoHideDuration:6e3,onClose:K,message:h.message,action:e.jsx(ke,{size:"small","aria-label":"close",color:"inherit",onClick:K,children:e.jsx(Pe,{fontSize:"small"})})})]})}):e.jsx(z,{children:e.jsx(j,{color:"warning",variant:"h6",children:"No user data available."})})},Ye=({children:s})=>e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(Ae,{}),e.jsx("main",{className:"flex-grow container mx-auto px-4 py-8",children:s}),e.jsx(Ee,{})]});function Ze(){return e.jsx(ae,{children:e.jsx(Ye,{children:e.jsxs(de,{children:[e.jsx(C,{path:"/",element:e.jsx(X,{})}),e.jsx(C,{path:"/login",element:e.jsx(X,{})}),e.jsx(C,{path:"/register",element:e.jsx(He,{})}),e.jsx(C,{path:"/verify",element:e.jsx(Ve,{})}),e.jsx(C,{path:"/reset-password",element:e.jsx(We,{})}),e.jsx(C,{path:"/confirm-reset",element:e.jsx(Qe,{})}),e.jsx(C,{path:"/dashboard",element:e.jsx(Ke,{})})]})})})}re.createRoot(document.getElementById("root")).render(e.jsx(ee.StrictMode,{children:e.jsx(Ze,{})}));
